<div ng-show="show" id="editor-suggestions-resizer"
     resizer="horizontal"
     resizer-height="12"
     resizer-top="#editor-content"
     resizer-max="60%"
     resizer-bottom="#editor-suggestions">
</div>

<aside ng-if="show" class="Editor-suggestions Editor-panel u-bgHigh" id="editor-suggestions" ng-class="{'is-search-active': search.isVisible}">

  <nav class="Editor-suggestionsHeader u-bgHighest u-sPH-3-4">
    <h2 class="Heading--panel u-sPV-1-4 u-floatLeft u-sizeHeight-1_1-2 u-floatLeft">
      <icon name="suggestions"
        class="Icon--sm u-textMuted">
      </icon>
        Suggestions
    </h2>
    <div class="u-floatRight">
      <suggestion-header>
    </div>
    <div class="Editor-suggestionsSearch u-sPB-1-4" ng-if="search.isVisible">
      <div class="InputGroup InputGroup--outlined InputGroup--rounded" ng-class="{'is-focused': search.input.focused}">
        <span class="InputGroup-addon" ng-click="focusSearch($event)"><icon name="search" title="Search suggestions" class="Icon--xsm"></icon></span>
        <input type="search"
          placeholder="Search suggestions…"
          class="InputGroup-input u-sizeLineHeight-1_1-4"
          ng-model="search.input.text"
          ng-trim="false"
          ng-focus="search.input.focused = true"
          ng-blur="search.input.focused = false"
          maxlength="1000"
          focus-on="searchSugInput" />
          <span ng-switch on="search.isLoading" class="InputGroup-addon">
            <!-- TODO Add loading indicator -->
            <span ng-click="focusSearch($event)" ng-switch-when="true" class="Editor-suggestionsSearchLoader">Loading… </span>
            <span ng-click="focusSearch($event)" ng-switch-default ng-hide="!hasSearch" class="Editor-suggestionsSearchResults" ng-bind="suggestions.length + ' results'"></span>
          </span>
          <span class="InputGroup-addon">
            <button ng-if="hasSearch" ng-click="editorSuggestions.clearSearchResults($event)">
              <icon name="cross" title="Clear search" class="Icon--xsm"></icon>
            </button>
          </span>
      </div>
    </div>
  </nav>

  <div class="Editor-suggestionsBody u-bgHigh">
    <div ng-switch on="search.isLoading">
      <div ng-switch-when="true" class="u-posCenterCenter u-textEmpty u-textCenter">
        <!-- TODO Add loading indicator -->
        <icon name="loader" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
        <p>Loading suggestions</p>
      </div>
      <div ng-switch-default>
        <div ng-if="!hasSearch && !search.input.focused && !isTransUnitSelected" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="suggestions" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p>Select a phrase or enter a search term</p>
        </div>
        <div ng-if="!hasSearch && (search.input.focused || isTransUnitSelected)" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="search" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p>Enter a search term</p>
        </div>
        <div ng-if="hasSearch && !hasSuggestions" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="suggestions" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p ng-if="isTextSearch">No matching suggestions for the current search</p>
          <p ng-if="isPhraseSearch">No matching suggestions for the currently selected phrase</p>
        </div>
        <div ng-if="hasSearch && hasSuggestions" ng-repeat="suggestion in suggestions">
          <suggestion suggestion="suggestion"
            index="$index"
            search="searchStrings"
            diff-enabled="diff"></suggestion>
        </div>
      </div>
    </div>

  </div>

</aside>
