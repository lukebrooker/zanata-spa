<div ng-show="show" id="editor-suggestions-resizer"
     resizer="horizontal"
     resizer-height="12"
     resizer-top="#editor-content"
     resizer-max="60%"
     resizer-bottom="#editor-suggestions">
</div>

<aside ng-if="show" class="Editor-suggestions Editor-panel" id="editor-suggestions" ng-class="{'is-search-active': searchIsVisible}">

  <nav class="Editor-suggestionsHeader u-bgHighest u-sPH-3-4">
    <h2 class="Heading--panel u-sPV-1-4 u-floatLeft u-sizeHeight-1_1-2 u-floatLeft">
      <icon name="suggestions"
        class="Icon--sm u-textMuted">
      </icon>
        Suggestions
    </h2>
    <div class="u-floatRight">
      <ul class="u-listHorizontal u-textCenter">
<!--         <li class="u-smv-1-4">
          <a class="Link--neutral u-sizeHeight-1_1-2"
            title="Auto-fill" ng-click="suggestions.toggleAutofill()">
            (switch icon)
            Auto-fill
          </a>
        </li> -->
        <li class="u-sM-1-4">
          <span class="Switch">
            <input type="checkbox" class="Switch-checkbox" id="difference-toggle" ng-model="diff"/>
            <label class="Switch-label" for="difference-toggle">
              <span class="Switch-labelText">Difference</span>
            </label>
          </span>
        </li>
        <li class="u-sM-1-8">
          <button class="Button Button--snug Button--invisible u-roundish" title="Search suggestions"
            ng-class="{'is-active': searchIsVisible, 'is-disabled': !isTransUnitSelected }"
            ng-click="editorSuggestions.toggleSearch($event)"
            ng-disabled="!isTransUnitSelected">
            <icon name="search" title="Search suggestions" class="Icon--sm"></icon>
          </button>
        </li>
        <li>
          <button class="Link--neutral u-sizeHeight-1_1-2 u-sizeWidth-1_1-2" title="Close suggestions" ng-click="editorSuggestions.closeSuggestions()">
            <icon name="cross" title="Close suggestions" class="Icon--sm"></icon>
          </button>
        </li>
      </ul>
    </div>
    <div class="Editor-suggestionsSearch u-sPB-1-4" ng-if="searchIsVisible">
      <div class="InputGroup InputGroup--outlined InputGroup--rounded" ng-class="{'is-focused': editorSuggestions.searchSugFocused}">
        <span class="InputGroup-addon" ng-click="focusSearch($event)"><icon name="search" title="Search suggestions" class="Icon--xsm"></icon></span>
        <input type="search"
          placeholder="Search suggestions…"
          class="InputGroup-input u-sizeLineHeight-1_1-4"
          ng-model="searchInput.text"
          ng-trim="false"
          ng-focus="editorSuggestions.searchSugFocused = true"
          ng-blur="editorSuggestions.searchSugFocused = false"
          maxlength="1000"
          focus-on="searchSugInput" />
          <span ng-switch on="searchIsLoading" class="InputGroup-addon">
            <!-- TODO Add loading indicator -->
            <span ng-click="focusSearch($event)" ng-switch-when="true" class="Editor-suggestionsSearchLoader">Loading… </span>
            <span ng-click="focusSearch($event)" ng-switch-default ng-hide="editorSuggestions.searchText === ''" class="Editor-suggestionsSearchResults" ng-bind="editorSuggestions.searchResultsTotal + ' results'"></span>
          </span>
          <span class="InputGroup-addon">
            <button ng-if="searchStrings.length" ng-click="editorSuggestions.clearSearchResults($event)">
              <icon name="cross" title="Clear search" class="Icon--xsm"></icon>
            </button>
          </span>
      </div>
    </div>
  </nav>

  <div class="Editor-suggestionsBody">
    <div ng-switch on="searchIsLoading">
      <div ng-switch-when="true" class="u-posCenterCenter u-textEmpty u-textCenter">
        <!-- TODO Add loading indicator -->
        <icon name="loader" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
        <p>Loading suggestions</p>
      </div>
      <div ng-switch-default>
        <div ng-if="!searchStrings.length && !editorSuggestions.searchSugFocused && !isTransUnitSelected" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="suggestions" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p>Select a phrase or enter a search term</p>
        </div>
        <div ng-if="!searchStrings.length && (editorSuggestions.searchSugFocused || isTransUnitSelected)" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="search" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p>Enter a search term</p>
        </div>
        <div ng-if="searchStrings.length && !editorSuggestions.suggestions.length" class="u-posCenterCenter u-textEmpty u-textCenter">
          <icon name="suggestions" class="Icon--lg Icon--circle u-sMB-1-4"></icon>
          <p ng-if="isTextSearch">No matching suggestions for the current search</p>
          <p ng-if="isPhraseSearch">No matching suggestions for the currently selected phrase</p>
        </div>
        <div ng-if="searchStrings.length && editorSuggestions.suggestions.length" ng-repeat="suggestion in editorSuggestions.suggestions">
          <suggestion suggestion="suggestion"
            index="$index"
            search="searchStrings"
            diff-enabled="diff"></suggestion>
        </div>
      </div>
    </div>

  </div>

</aside>
